<script>
  const COLORSCHEME_BUTTON = document.querySelector("#colorscheme-button");
  const THEME_KEY = "theme";
  const DARK = "dark";
  const LIGHT = "light";

  function setTheme(theme) {
    document.documentElement.setAttribute("data-theme", theme);
    window.localStorage.setItem(THEME_KEY, theme);
  }

  window.onload = () => {
    const currentTheme = window.localStorage.getItem(THEME_KEY);

    if (currentTheme === null) {
      if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
        setTheme(DARK);
      } else {
        setTheme(LIGHT);
      }
    } else {
      setTheme(currentTheme);
    }
  };

  function toggleColorscheme() {
    const currentTheme = window.localStorage.getItem(THEME_KEY);

    if (currentTheme == LIGHT) {
      setTheme(DARK);
    } else {
      setTheme(LIGHT);
    }

  }
  COLORSCHEME_BUTTON.addEventListener("click", toggleColorscheme);
</script>
