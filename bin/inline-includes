#!/bin/bash

rm -rf build
cp -r public build
cd build
echo "Created build/"

# TODO: please optimize this
rg -l "include.*file.*(head|nav|footer)" | xargs sed -i \
  -e "/^.*include.*file.*head.*$/r ../public/.shared/head.html" \
  -e '/^.*include.*file.*head.*$/d' \
  -e "/^.*include.*file.*nav.*$/r ../public/.shared/nav.html" \
  -e '/^.*include.*file.*nav.*$/d' \
  -e "/^.*include.*file.*footer.*$/r ../public/.shared/footer.html" \
  -e '/^.*include.*file.*footer.*$/d'
echo "Inlined includes"



