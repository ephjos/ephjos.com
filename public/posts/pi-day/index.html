<!DOCTYPE html>
<html lang="en">

  <head>
    <!-- {BEGIN_HEAD} -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name=”robots” content=”NOODP,NOYDIR” />
    <meta name="theme-color" content="#222222">

    <meta property="og:image" content="/img/logo_card.webp">
    <meta property="twitter:image" content="/img/logo_card.webp">

    <link rel="stylesheet" href="/index.css">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="touch-icon-iphone.png">
    <!-- {END_HEAD} -->

    <style>
.container {
  position: relative;
  display: block;
  width: 100%;
  height: 100%;
}
canvas {
  display: block;
  width: 100%;
  height: 100%;
}
#overlay {
  position: absolute;
  left: 10px;
  top: 10px;
  background-color: rgba(0, 0, 0, 0.7);
  color: white;
  font-family: monospace;
  font-size: 0.8em;
  padding: 0 0.5em;
}
#overlay:empty {
  padding: 0;
}
#overlay b {
  font-weight: 900;
}
label {
  font-family: monospace;
  display: block;
  margin-top: 0.5em;
  margin-left: 1em;
  margin-right: 1em;
}
input {
  width: 100%;
}
button {
  padding: 0.5em;
  border-radius: 5px;
  cursor: pointer;
}
    </style>
    <script src="./gl-matrix-min.js" defer></script>
    <script src="./index.js" defer></script>
    <title>pi day - ephjos</title>
  </head>

  <body>
    <main>
      <span>2022/03/14</span>
      <h2>pi day</h2>

      <section>
        <p>
          In celebration of Pi Day, I figured that I could get around to
          implementing a simulation of
          <a href="https://en.wikipedia.org/wiki/Buffon%27s_needle_problem">
            Buffon's Needle</a> for approximating pi. I've implemented
          this in client-side JS and used WebGL for rendering. It's been
          a while since I used WebGL directly and wrote some vanilla JS.
          The
          <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Tutorial/Using_shaders_to_apply_color_in_WebGL">
            Mozilla docs for WebGL</a> have tons of great examples that
          can be easily used as a jumping off point. This was a
          fun exercise, and it was interesting to work with this first hand.
        </p>
        <p>
          The implementation is far from optimal and does all of the heavy
          lifting in JS. This could clearly be made more efficient, which
          will be left as an exercise for the reader. Play with the parameters
          and see how long it takes to generate a basic approximation of pi!
        </p>
        <div class="container">
          <canvas id="glcanvas"></canvas>
          <div id="overlay"></div>
          <div>
            <label>
              Lines:
              <input id="lines-slider" type="range" min="2" max="20" value="5" step="1">
            </label>
            <label>
              Sticks (10^x):
              <input id="sticks-slider" type="range" min="0" max="6" value="3" step="1">
            </label>
            <label>
              Stick length:
              <input id="stick-length-slider" type="range" min="0.1" max="1" value="0.4" step="0.1">
            </label>
            <label>
              <button id="generate">Generate</button>
            </label>
            <label>
              Find match to 4 decimals (3.1415):
              <button id="find">Start</button>
            </label>
          </div>
        </div>
        <p>
          If you want to check out a better version of this simulation with
          more details on the math, check out
          <a href="https://ogden.eu/pi/">Thomas Ogden's website</a>.
        </p>

      </section>
    </main>
  </body>
</html>

